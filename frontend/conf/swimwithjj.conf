<VirtualHost *:80>
    ServerName swimwithjj.com
    RedirectPermanent / http://www.swimwithjj.com
</VirtualHost>

<VirtualHost *:80>
    ServerAdmin admin@swimwithjj.com
    ServerName www.swimwithjj.com
    ServerAlias swimwithjj.com

    PassEnv DB_HOST EMAIL_SENDER_NAME EMAIL_SENDER_ADDRESS EMAIL_SENDER_PASSWORD STRIPE_SECRET_KEY STRIPE_PUBLISH_KEY DB_NAME MESSAGE_ADDRESS

    DocumentRoot /var/www/swimwithjj.com/
    <Directory /var/www/swimwithjj.com/>
        Options ExecCGI
        AddHandler cgi-script .cgi .py
    </Directory>

    <Directory /var/www/swimwithjj.com/admin>
        Options ExecCGI
        AddHandler cgi-script .cgi .py
        AuthType Basic
        AuthName "Restricted Access"
        AuthUserFile /var/.htpasswd
        Require valid-user
    </Directory>

    <Directory /var/www/swimwithjj.com/scripts>
        Deny from all
    </Directory>

    <Directory /var/www/swimwithjj.com/tests>
        Deny from all
    </Directory>

    ErrorLog /var/log/apache2/swimwithjj.com-error.log
    LogLevel warn

    CustomLog /var/log/apache2/swimwithjj.com-access.log combined
    ServerSignature On
</VirtualHost>
